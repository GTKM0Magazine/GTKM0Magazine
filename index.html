<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Global Tour KmO Magazine</title>

  <meta name="description" content="Archivo de revistas ¬∑ Lectura interactiva + PDF descargable" />

  <style>
    /* ====== FUENTES LOCALES ====== */
    @font-face{
      font-family: "Miracle";
      src: url("/GTKM0Magazine/assets/miracle.woff") format("woff");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face{
      font-family: "Big Shoulders";
      src: url("/GTKM0Magazine/assets/big-shoulders-regular.woff") format("woff");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face{
      font-family: "Big Shoulders";
      src: url("/GTKM0Magazine/assets/big-shoulders-bold.woff") format("woff");
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }

    :root{
      --bg:#0f0f10;
      --panel: rgba(18,18,20,.78);
      --border: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.65);
      --shadow: 0 20px 60px rgba(0,0,0,.55);
      --radius: 18px;

      --red:#e10600;
      --green:#22c55e;

      --font-display: "Miracle", serif;
      --font-title: "Big Shoulders", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --font-body: "Helvetica Now Condensed", "HelveticaNeue-Condensed", "Helvetica Neue",
                   "Arial Narrow", Arial, "Roboto Condensed", system-ui, sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      background: radial-gradient(1200px 600px at 50% -10%, rgba(225,6,0,.10), transparent 60%),
                  radial-gradient(900px 500px at 15% 10%, rgba(255,255,255,.06), transparent 60%),
                  var(--bg);
      color:var(--text);
      font-family: var(--font-body);
    }

    /* Topbar */
    .topbar{
      position:sticky;
      top:0;
      z-index:50;
      background: var(--panel);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom:1px solid var(--border);
    }
    .topbar-inner{
      max-width:1100px;
      margin:0 auto;
      padding:14px 16px;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }
    .brand{
      display:flex;
      flex-direction:column;
      line-height:1.05;
      gap:4px;
      min-width: 220px;
    }
    .brand .t{
      font-family: var(--font-display);
      font-weight:400;
      letter-spacing:.7px;
      font-size:18px;
      white-space:nowrap;
    }
    .brand .s{
      font-size:12px;
      color:var(--muted);
      letter-spacing:.2px;
      white-space:nowrap;
    }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
      flex: 1;
    }
    .input{
      width: 320px;
      max-width: 60vw;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color:var(--text);
      outline:none;
      font-size:13px;
      font-family: var(--font-body);
    }
    .input::placeholder{ color: rgba(255,255,255,.45); }

    /* Layout */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:26px 16px 60px;
    }

    .hero{
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap:18px;
      align-items:stretch;
      margin-bottom:22px;
    }
    .hero-card{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(255,255,255,.04);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      padding:20px;
    }

    /* ‚úÖ Ajuste: m√°s contenido en desktop */
    .hero h1{
      margin:0;
      font-family: var(--font-display);
      font-weight:400;
      font-size: clamp(32px, 4vw, 48px);
      letter-spacing:.6px;
      line-height:1.03;
    }
    .hero p{
      margin:10px 0 0;
      color:var(--muted);
      font-size:14px;
      line-height:1.45;
      max-width: 60ch;
    }

    .pill-row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.22);
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }
    .pill b{
      color:var(--text);
      font-family: var(--font-title);
      font-weight:700;
      letter-spacing:.9px;
      text-transform: uppercase;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background: rgba(255,255,255,.22);
    }
    .dot.green{
      background: var(--green);
      box-shadow: 0 0 0 4px rgba(34,197,94,.14);
    }

    /* ‚úÖ Stats simplificadas (solo 2) */
    .stats{
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      gap:12px;
      padding:18px;
    }
    .kpi{
      border:1px solid var(--border);
      border-radius: 14px;
      background: rgba(0,0,0,.18);
      padding:14px;
    }
    .kpi .n{
      font-family: var(--font-title);
      font-weight:700;
      font-size:26px;
      letter-spacing:1px;
      text-transform: uppercase;
    }
    .kpi .l{
      margin-top:4px;
      color:var(--muted);
      font-size:12px;
    }

    /* Grid */
    .section-title{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:12px;
      margin:22px 0 12px;
    }
    .section-title h2{
      margin:0;
      font-family: var(--font-title);
      font-weight:700;
      letter-spacing:1px;
      text-transform: uppercase;
      font-size:16px;
    }
    .section-title .hint{
      color:var(--muted);
      font-size:12px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0,1fr));
      gap:16px;
    }

    .card{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(255,255,255,.04);
      overflow:hidden;
      position:relative;
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      transition: transform .18s ease, border-color .18s ease, background .18s ease;
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.16);
      background: rgba(255,255,255,.055);
    }

    .cover{
      aspect-ratio: 3 / 4;
      width:100%;
      background: #111;
      display:block;
      position:relative;
      overflow:hidden;
      text-decoration:none;
    }
    .cover img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transform: scale(1.02);
    }
    .fade{
      position:absolute;
      inset:auto 0 0 0;
      height: 40%;
      background: linear-gradient(to top, rgba(0,0,0,.85), transparent);
      pointer-events:none;
    }

    .meta{
      padding:14px 14px 16px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .country{
      font-family: var(--font-title);
      font-weight:700;
      letter-spacing:1px;
      text-transform: uppercase;
      font-size:16px;
    }
    .date{
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    /* ‚úÖ Tags: Disponible verde */
    .tag{
      display:inline-flex;
      align-items:center;
      gap:7px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.20);
      color:var(--muted);
      font-size:12px;
      width: fit-content;
    }
    .tag .mini-dot{
      width:8px;height:8px;border-radius:50%;
      background: rgba(255,255,255,.20);
    }
    .tag.live{
      border-color: rgba(34,197,94,.35);
      color: rgba(255,255,255,.80);
    }
    .tag.live .mini-dot{ background: var(--green); }
    .tag.soon .mini-dot{ background: rgba(255,255,255,.25); }

    .btn-row{
      display:flex;
      gap:10px;
      margin-top:6px;
    }
    .btn{
      flex:1;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:10px 12px;
      border-radius: 999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      text-decoration:none;
      user-select:none;
      cursor:pointer;

      font-family: var(--font-title);
      font-weight:700;
      letter-spacing:1px;
      text-transform: uppercase;
      font-size:13px;
    }
    .btn:hover{ background: rgba(255,255,255,.10); }

    .btn.primary{
      border-color: rgba(34,197,94,.55);
      background: rgba(34,197,94,.16);
    }
    .btn.primary:hover{ background: rgba(34,197,94,.24); }

    /* Locked card */
    .locked{
      opacity: .92;
    }
    .locked:hover{
      transform:none;
      background: rgba(255,255,255,.04);
    }

    .badge{
      position:absolute;
      left:12px;
      bottom:12px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.38);
      color: rgba(255,255,255,.85);
      font-family: var(--font-title);
      font-weight:700;
      letter-spacing:1px;
      text-transform: uppercase;
      font-size:12px;
      pointer-events:none;
    }

    footer{
      max-width:1100px;
      margin:26px auto 0;
      padding:0 16px 24px;
      color:rgba(255,255,255,.45);
      font-size:12px;
      text-align:center;
    }

    /* Modal */
    .modal-backdrop{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.60);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:100;
    }
    .modal{
      max-width: 520px;
      width:100%;
      border:1px solid var(--border);
      border-radius: 18px;
      background: rgba(18,18,20,.92);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      padding:16px;
    }
    .modal h3{
      margin:0 0 6px;
      font-family: var(--font-title);
      font-weight:700;
      letter-spacing:1px;
      text-transform: uppercase;
    }
    .modal p{ margin:0 0 12px; color:var(--muted); line-height:1.4; }
    .modal .mrow{ display:flex; gap:10px; justify-content:flex-end; }
    .modal .mbtn{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.06);
      color:var(--text);
      cursor:pointer;
      font-family: var(--font-title);
      font-weight:700;
      letter-spacing:1px;
      text-transform: uppercase;
      font-size:13px;
    }

    /* Responsive */
    @media (max-width: 980px){
      .grid{ grid-template-columns: repeat(2, minmax(0,1fr)); }
      .hero{ grid-template-columns: 1fr; }
      .brand{ min-width:auto; }
      .brand .s{ white-space:normal; }
    }
    @media (max-width: 540px){
      .grid{ grid-template-columns: 1fr; }
      .input{ width: 55vw; }
    }
  </style>
</head>

<body>

  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="t">Global Tour KmO Magazine</div>
        <div class="s">Archivo de revistas</div>
      </div>

      <div class="actions">
        <input id="search" class="input" placeholder="Buscar edici√≥n‚Ä¶" />
      </div>
    </div>
  </div>

  <main class="wrap">
    <section class="hero">
      <div class="hero-card">
        <h1>Archivo de revistas</h1>
        <p>
          Cada edici√≥n incluye lectura interactiva y la opci√≥n de descargar el PDF como recuerdo.
        </p>

        <div class="pill-row">
          <div class="pill"><span class="dot green"></span><b>Disponible</b></div>
          <div class="pill"><span class="dot"></span><b>Pr√≥ximamente</b></div>
        </div>
      </div>

      <div class="hero-card stats">
        <div class="kpi">
          <div class="n" id="kpiLive">0</div>
          <div class="l">Ediciones disponibles</div>
        </div>
        <div class="kpi">
          <div class="n" id="kpiSoon">0</div>
          <div class="l">Pr√≥ximamente</div>
        </div>
      </div>
    </section>

    <div class="section-title">
      <h2>Ediciones</h2>
      <div class="hint"></b></div>
    </div>

    <section class="grid" id="grid"></section>
  </main>

  <footer>
    Hecho con cari√±o ¬∑ Global Tour Km0 Magazine ¬∑ Proyecto mundial colabortivo
  </footer>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <h3 id="modalTitle">Pr√≥ximamente</h3>
      <p id="modalText">Esta edici√≥n a√∫n no est√° publicada.</p>
      <div class="mrow">
        <button class="mbtn" id="modalClose">Cerrar</button>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // EDITA SOLO ESTA LISTA üëá
    // =========================
    const EDITIONS = [
      {
        country: "Chile",
        slug: "chile",
        dateLabel: "28 febrero 2026",
        published: true,
        cover: "/GTKM0Magazine/revistas/chile/paginas/001.jpg"
      },

      // Pr√≥ximamente (NO se muestra su portada real)
      {
        country: "Colombia",
        slug: "colombia",
        dateLabel: "Disponible el 14 marzo 2026",
        published: false
      },
      {
        country: "Ecuador",
        slug: "ecuador",
        dateLabel: "Disponible el 19 marzo 2026",
        published: false
      },
      {
        country: "Per√∫",
        slug: "peru",
        dateLabel: "Disponible el 24 marzo 2026",
        published: false
      },
      {
        country: "Brasil",
        slug: "brasil",
        dateLabel: "Disponible el 27 marzo 2026",
        published: false
      },
      {
        country: "Portugal",
        slug: "portugal",
        dateLabel: "Disponible el 25 abril 2026",
        published: false
      },
      {
        country: "Espa√±a",
        slug: "espana",
        dateLabel: "Disponible el 02 mayo 2026",
        published: false
      },
    ];
    // =========================

    const LOCKED_COVER = "/GTKM0Magazine/assets/cover-locked.png";

    const grid = document.getElementById("grid");
    const search = document.getElementById("search");

    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalTitle = document.getElementById("modalTitle");
    const modalText = document.getElementById("modalText");
    const modalClose = document.getElementById("modalClose");

    function openModal(title, text){
      modalTitle.textContent = title;
      modalText.textContent = text;
      modalBackdrop.style.display = "flex";
    }
    function closeModal(){
      modalBackdrop.style.display = "none";
    }
    modalClose.addEventListener("click", closeModal);
    modalBackdrop.addEventListener("click", (e)=>{ if(e.target === modalBackdrop) closeModal(); });

    function render(list){
      grid.innerHTML = "";

      const live = list.filter(e => e.published).length;
      const soon = list.filter(e => !e.published).length;
      document.getElementById("kpiLive").textContent = live;
      document.getElementById("kpiSoon").textContent = soon;

      const ordered = [...list].sort((a,b)=>{
        return (b.published - a.published) || a.country.localeCompare(b.country);
      });

      for(const ed of ordered){
        const href = `/GTKM0Magazine/revistas/${ed.slug}/`;
        const isLocked = !ed.published;

        // ‚úÖ Si est√° bloqueada, SIEMPRE cover gen√©rica
        const coverSrc = isLocked ? LOCKED_COVER : ed.cover;

        const card = document.createElement("article");
        card.className = "card" + (isLocked ? " locked" : "");
        card.innerHTML = `
          <a class="cover" href="${isLocked ? "#" : href}" aria-label="${ed.country}">
            <img src="${coverSrc}" alt="${isLocked ? "Edici√≥n pr√≥ximamente" : ("Portada " + ed.country)}" loading="lazy">
            <div class="fade"></div>
            ${isLocked ? `<div class="badge">Pr√≥ximamente</div>` : ``}
          </a>

          <div class="meta">
            <div class="row">
              <div class="country">${ed.country}</div>
              <div class="date">${ed.dateLabel || ""}</div>
            </div>

            <div class="tag ${ed.published ? "live" : "soon"}">
              <span class="mini-dot"></span>
              ${ed.published ? "Disponible" : "Pr√≥ximamente"}
            </div>

            <div class="btn-row">
              ${
                ed.published
                ? `
                  <a class="btn primary" href="${href}">Leer</a>
                  <button class="btn" type="button" data-copy="${href}">Copiar enlace</button>
                `
                : `
                  <button class="btn" type="button" data-soon="${ed.country}">Ver info</button>
                `
              }
            </div>
          </div>
        `;

        if(isLocked){
          const info = ed.dateLabel
            ? `Esta edici√≥n est√° preparada, pero a√∫n no est√° publicada.\n\n${ed.dateLabel}`
            : `Esta edici√≥n est√° preparada, pero a√∫n no est√° publicada.`;

          card.querySelector(".cover").addEventListener("click", (ev)=>{
            ev.preventDefault();
            openModal(`${ed.country} ¬∑ Pr√≥ximamente`, info);
          });

          card.querySelector("[data-soon]").addEventListener("click", ()=>{
            openModal(`${ed.country} ¬∑ Pr√≥ximamente`, info);
          });

        }else{
          card.querySelector("[data-copy]").addEventListener("click", async ()=>{
            const hrefPath = card.querySelector("[data-copy]").getAttribute("data-copy");
            const full = location.origin + hrefPath;
            try{
              await navigator.clipboard.writeText(full);
              openModal("Enlace copiado", "Ya puedes pegarlo donde quieras ‚ú®");
            }catch(e){
              openModal("No se pudo copiar", "Copia manual: " + full);
            }
          });
        }

        grid.appendChild(card);
      }
    }

    function filter(){
      const q = (search.value || "").trim().toLowerCase();
      if(!q) return render(EDITIONS);
      render(EDITIONS.filter(e => e.country.toLowerCase().includes(q)));
    }

    search.addEventListener("input", filter);
    render(EDITIONS);
  </script>

</body>
</html>